(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{9117:function(e,s,t){Promise.resolve().then(t.bind(t,8564))},9376:function(e,s,t){"use strict";var a=t(5475);t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},2078:function(e,s,t){"use strict";t.d(s,{F:function(){return a}});let a="http://localhost:5000"},8564:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return o}});var a=t(7437),r=t(2265),c=t(8575),n=t(9376),i=t(8371),l=t(7524),d=t(2078);function o(){let e=(0,n.useRouter)(),s=(0,c.v9)(e=>e.auth.token),[t,o]=(0,r.useState)([]),[u,h]=(0,r.useState)(!0),[m,x]=(0,r.useState)({type:"",message:""}),[b,j]=(0,r.useState)(1),[f,N]=(0,r.useState)(1);(0,r.useEffect)(()=>{if(!s){e.replace("/login");return}p(b)},[s,b]);let p=async e=>{try{let t=await fetch("".concat(d.F,"/api/purchase?page=").concat(e,"&limit=10"),{headers:{Authorization:"Bearer ".concat(s)}}),a=await t.json();if(!t.ok)throw Error(a.error||"Failed to load");o(a.purchases),N(a.totalPages)}catch(e){x({type:"danger",message:e.message})}finally{h(!1)}};return s?(0,a.jsxs)(i.default,{isNotHeaderTop:!0,isHeaderRight:!0,isTextWhite:!0,isNavbarAppointmentBtn:!0,children:[(0,a.jsx)(l.Z,{title:"Order History",text:"Order History",bg:"/img/bg/5.jpg"}),(0,a.jsxs)("div",{className:"container pb-5",children:[(0,a.jsx)("h1",{className:"mb-4",children:"Order History"}),m.message&&(0,a.jsx)("div",{className:"alert alert-".concat(m.type),children:m.message}),u?(0,a.jsx)("p",{children:"Loadingâ€¦"}):0===t.length?(0,a.jsx)("p",{children:"No purchases found."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"row",children:t.map(e=>(0,a.jsx)("div",{className:"col-12 col-md-4",children:(0,a.jsx)("div",{className:"card mb-4 shadow",children:(0,a.jsxs)("div",{className:"card-body text-center",children:[(0,a.jsxs)("h5",{className:"card-title",children:["Order #",e.id]}),(0,a.jsxs)("p",{className:"card-text",children:["Cases: ",e.cases]}),(0,a.jsx)("p",{className:"card-text",children:e.description}),(0,a.jsxs)("h6",{className:"text-primary",children:["$",e.price]}),(0,a.jsx)("small",{className:"text-muted",children:new Date(e.created_at).toLocaleString()})]})})},e.id))}),(0,a.jsxs)("div",{className:"d-flex justify-content-center mt-4",children:[(0,a.jsx)("button",{className:"btn btn-secondary mx-2",onClick:()=>j(b-1),disabled:1===b,children:"Previous"}),(0,a.jsxs)("span",{className:"align-self-center",children:["Page ",b," of ",f]}),(0,a.jsx)("button",{className:"btn btn-secondary mx-2",onClick:()=>j(b+1),disabled:b===f,children:"Next"})]})]})]})]}):null}},7524:function(e,s,t){"use strict";var a=t(7437),r=t(7648);s.Z=e=>{let{text:s,title:t,item:c,type:n,mb:i,isCapitalize:l,bg:d}=e,{name:o,path:u}=c||{};return(0,a.jsx)("div",{className:"ltn__breadcrumb-area ".concat(3===n?"ltn__breadcrumb-area-2 plr--9":2===n?"ltn__breadcrumb-area-3 plr--9":"ltn__breadcrumb-area-2","  ltn__breadcrumb-color-white bg-overlay-theme-black-90 bg-image ").concat(i||""),"data-bs-bg":d||"/img/bg/9.jpg",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"col-lg-12",children:(0,a.jsxs)("div",{className:"ltn__breadcrumb-inner ltn__breadcrumb-inner-2 justify-content-between",children:[(0,a.jsxs)("div",{className:"section-title-area ltn__section-title-2",children:[(0,a.jsx)("h6",{className:"section-subtitle ltn__secondary-color"}),(0,a.jsx)("h1",{className:"section-title white-color ".concat(l?"text-capitalize":""),children:t})]}),(0,a.jsx)("div",{className:"ltn__breadcrumb-list",children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)(r.default,{href:"/",children:"Home"})})," ",c?(0,a.jsx)("li",{children:(0,a.jsx)(r.default,{href:u,children:o})}):""," ",(0,a.jsx)("li",{children:s})]})})]})})})})})}}},function(e){e.O(0,[300,699,990,461,834,157,371,971,117,744],function(){return e(e.s=9117)}),_N_E=e.O()}]);